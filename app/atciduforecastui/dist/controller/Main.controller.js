sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("atciduforecastui.controller.Main",{onInit:async function(){const e=await $.get(this.getOwnerComponent().getModel().sServiceUrl+"/ResourceDashboard");if(e){this.getOwnerComponent().getModel("localD").setProperty("/ResourceDashboard",e?.value)}this.setFilterMessage("Displaying Information of All Resources")},onRecordFilterChange:function(e){var t=e.getParameter("selectedItem").getKey();var i=this.getView().byId("resourceTable");var s=i.getBinding("items");var r;var n="";if(t==="All"){s.filter([]);n="Displaying Information of All Resources"}else if(t==="HittingDownTime"){this.onFilterChange();n="Displaying Information of Resources nearing Down Time"}else{if(t==="NotAssigned"){r=new sap.ui.model.Filter("assignmentStatus",sap.ui.model.FilterOperator.EQ,null);n="Displaying Information of Resources with Assignment status as Not Assigned"}else{r=new sap.ui.model.Filter("assignmentStatus",sap.ui.model.FilterOperator.EQ,t);n="Displaying Information of Resources with Assignment status as "+t}s.filter(r)}this.setFilterMessage(n)},onFilterChange:function(){var e=this.getOwnerComponent().getModel("localD").getProperty("/ResourceDashboard");var t=this.getView().byId("resourceTable");var i=t.getBinding("items");var s=new Date;var r=[];e.forEach(function(e){var t=new Date(e.endDate);var i=t.getTime()-s.getTime();var n=Math.floor(i/(1e3*60*60*24));if(n<=15){r.push(new sap.ui.model.Filter("enterpriseID",sap.ui.model.FilterOperator.EQ,e.enterpriseID))}});t.getBinding("items").aFilters=[];i.filter(r)},setFilterMessage:function(e){var t=this.getView().byId("_IDGenMessageStrip1");if(t){t.setText(e)}}})});